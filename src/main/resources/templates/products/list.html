<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ç™»éŒ²å•†å“ä¸€è¦§ - ç‰©ä¾¡æ¯”è¼ƒã‚¢ãƒ—ãƒª Ssada!</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			padding: 20px;
		}

		.container {
			max-width: 1200px;
			margin: 0 auto;
			background: rgba(255, 255, 255, 0.95);
			backdrop-filter: blur(20px);
			border-radius: 20px;
			box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
			overflow: hidden;
		}

		h1 {
			background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
			color: white;
			padding: 40px;
			margin: 0;
			font-size: 2.5rem;
			font-weight: 700;
			text-align: center;
			text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
			border: none;
		}

		.btn {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
			padding: 12px 24px;
			text-decoration: none;
			border-radius: 12px;
			border: none;
			cursor: pointer;
			font-weight: 600;
			font-size: 14px;
			transition: all 0.3s ease;
			display: inline-flex;
			align-items: center;
			gap: 8px;
		}

		.btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
			text-decoration: none;
			color: white;
		}

		.btn-group {
			display: flex;
			gap: 10px;
			margin: 30px 40px 20px 40px;
		}

		.btn-right {
			margin: 0;
		}

		.btn-container {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin: 0 40px 20px 40px;
		}

		/* ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
		.filter-section {
			margin: 20px 40px;
			padding: 20px;
			background: rgba(248, 250, 252, 0.8);
			border-radius: 12px;
			border: 1px solid rgba(226, 232, 240, 0.5);
		}

		.filter-form {
			display: flex;
			align-items: center;
			gap: 12px;
			flex-wrap: wrap;
		}

		.filter-form label {
			font-weight: 600;
			color: #374151;
			font-size: 14px;
		}

		.filter-form select {
			padding: 10px 16px;
			border: 2px solid #e2e8f0;
			border-radius: 8px;
			background: white;
			color: #374151;
			font-size: 14px;
			min-width: 150px;
			transition: all 0.3s ease;
			cursor: pointer;
		}

		.filter-form select:focus {
			outline: none;
			border-color: #667eea;
			box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
		}

		.filter-form select:hover {
			border-color: #cbd5e1;
		}

		.empty-message {
			text-align: center;
			padding: 80px 40px;
			color: #6b7280;
			font-size: 1.1rem;
		}

		.empty-message::before {
			content: 'ğŸ“Š';
			display: block;
			font-size: 4rem;
			margin-bottom: 20px;
			opacity: 0.5;
		}

		.table-wrapper {
			overflow-x: auto;
			margin: 0 40px 40px 40px;
		}

		table {
			width: 100%;
			min-width: 700px;
			border-collapse: separate;
			border-spacing: 0;
			background: white;
			border-radius: 16px;
			overflow: hidden;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
		}

		th {
			background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
			color: #374151;
			font-weight: 700;
			padding: 20px 16px;
			text-align: left;
			font-size: 14px;
			text-transform: uppercase;
			letter-spacing: 0.5px;
			border: none;
		}

		td {
			padding: 20px 16px;
			border-bottom: 1px solid #f1f5f9;
			color: #374151;
			font-size: 14px;
			transition: all 0.3s ease;
			border: none;
		}

		/* æœ€å¾Œã®è¡Œã®ãƒœãƒ¼ãƒ€ãƒ¼ã‚’å‰Šé™¤ */
		tr:last-child td {
			border-bottom: none;
		}

		/* ãƒ›ãƒãƒ¼åŠ¹æœ */
		tr:hover td {
			background-color: #f8fafc;
		}

		/* å•†å“åã®ã‚¹ã‚¿ã‚¤ãƒ« */
		td:nth-child(3) {
			font-weight: 600;
			color: #1e293b;
		}

		/* ä¾¡æ ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
		td:nth-child(5) {
			font-weight: 600;
			color: #059669;
			font-size: 16px;
		}

		/* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ« */
		input[type="checkbox"] {
			width: 18px;
			height: 18px;
			accent-color: #667eea;
			cursor: pointer;
		}

		/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ */
		@media (max-width: 768px) {
			body {
				padding: 10px;
			}

			.container {
				border-radius: 16px;
			}

			h1 {
				padding: 30px 20px;
				font-size: 2rem;
			}

			.btn-group {
				margin: 20px;
				flex-direction: column;
			}

			.btn-container {
				margin: 0 20px 20px 20px;
				flex-direction: column;
				gap: 10px;
				align-items: stretch;
			}

			.filter-section {
				margin: 20px;
				padding: 15px;
			}

			.filter-form {
				flex-direction: column;
				align-items: stretch;
				gap: 10px;
			}

			.filter-form select {
				min-width: auto;
				width: 100%;
			}

			.table-wrapper {
				margin: 0 20px 20px 20px;
			}

			table {
				min-width: 600px;
			}

			th,
			td {
				padding: 12px 8px;
				font-size: 13px;
			}

			.empty-message {
				padding: 60px 20px;
			}
		}

		/* ã‚ˆã‚Šå°ã•ãªã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã§ã®ãƒ†ãƒ¼ãƒ–ãƒ«èª¿æ•´ */
		@media (max-width: 480px) {
			table {
				font-size: 12px;
				min-width: 500px;
			}

			th,
			td {
				padding: 10px 6px;
			}

			h1 {
				font-size: 1.8rem;
			}

			.btn {
				font-size: 13px;
				padding: 10px 20px;
			}

			.filter-section {
				margin: 15px;
				padding: 12px;
			}
		}
	</style>
</head>

<body>
	<div class="container">
		<h1>ç™»éŒ²å•†å“ä¸€è¦§</h1>

		<!-- ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
		<div class="filter-section">
			<form method="get" th:action="@{/products}" class="filter-form">
				<label for="category">ã‚«ãƒ†ã‚´ãƒªã§çµã‚Šè¾¼ã‚€ï¼š</label>
				<select name="category" id="category">
				    <option value="" th:selected="${selectedCategory == null or selectedCategory == ''}">ã™ã¹ã¦</option>
				    <option th:each="cat : ${T(com.example.price_comparison.enums.Category).values()}"
				            th:value="${cat.name()}"
				            th:text="${cat.label}"
				            th:selected="${selectedCategory == cat.name()}">
				    </option>
				</select>
				
				<button type="submit" class="btn">æ¤œç´¢</button>
			</form>
		</div>

		<!-- å•†å“è¿½åŠ ã¨å‰Šé™¤ -->
		<form th:action="@{/products/delete}" method="post">

			<div class="btn-group">
				<a href="/products/new" class="btn">æ–°ã—ã„å•†å“ã‚’è¿½åŠ </a>
				<button type="submit" class="btn">é¸æŠã—ãŸå•†å“ã‚’å‰Šé™¤</button>
			</div>

			<div th:if="${#lists.isEmpty(priceInfos)}" class="empty-message">
				ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹å•†å“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br>
				ã€Œæ–°ã—ã„å•†å“ã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‹ã‚‰å•†å“ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚
			</div>
			
			<div class="table-wrapper" th:if="${!#lists.isEmpty(priceInfos)}">
				<table>
					<thead>
						<tr>
							<th>é¸æŠ</th>
							<th>å•†å“ID</th>
							<th>å•†å“å</th>
							<th>ã‚«ãƒ†ã‚´ãƒª</th>
							<th>ä¾¡æ ¼</th>
							<th>åº—èˆ—</th>
							<th>ç™»éŒ²æ—¥</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="priceInfo : ${priceInfos}">
							<td><input type="checkbox" name="selectedIds" th:value="${priceInfo.id}" /></td>
							<td th:text="${priceInfo.product.id}"></td>
							<td th:text="${priceInfo.product.name}"></td>
							<td th:text="${priceInfo.product.category != null ? priceInfo.product.category.label : 'æœªåˆ†é¡'}"></td>
							<td th:text="${priceInfo.price}"></td>
							<td th:text="${priceInfo.store.name}"></td>
							<td th:text="${priceInfo.registeredDate}"></td>
						</tr>
					</tbody>
				</table>
			</div>

			<div class="btn-container" th:if="${!#lists.isEmpty(priceInfos)}">
				<div></div>
				<a href="/products/table" class="btn btn-right">â†’ ä¾¡æ ¼è¡¨ã‚’è¦‹ã‚‹</a>
			</div>
		</form>

		<!-- è¿½åŠ ï¼šå‰Šé™¤æˆåŠŸãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
		<script th:if="${deleteSuccess}">
			alert("é¸æŠã•ã‚ŒãŸå•†å“ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚");
		</script>
	</div>
</body>

</html>